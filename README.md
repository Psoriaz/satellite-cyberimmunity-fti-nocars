## Запуск

### Запуск демонстрации системы

Для запуска полной демонстрации всех возможностей системы выполните:

```bash
python full_demo.py
```

Демонстрация последовательно покажет:
1. Инициализацию всех компонентов системы
2. Тестирование снимков от разных типов пользователей:
   - Администратор (имеет полные права)
   - Доверенный пользователь (может фотографировать и менять орбиту)
   - Обычный пользователь (может только фотографировать)
   - Неавторизованный пользователь (запросы отклоняются)
3. Управление запрещенными зонами:
   - Добавление зон администратором
   - Попытки добавления/удаления зон обычным пользователем
   - Блокировку снимков в запрещенных зонах
4. Изменение параметров орбиты:
   - Успешное изменение орбиты доверенным пользователем
   - Отклонение некорректных параметров орбиты

### Ожидаемый вывод

При успешном запуске демонстрации в логах должны присутствовать следующие сообщения:

```
[ИНФО][QUEUES] создан каталог очередей
[ИНФО][SECURITY] создан монитор безопасности
[ИНФО][SECURITY] изменение политик безопасности: ...
...
[ИНФО][AUTH] Модуль авторизации создан
[ИНФО][СИСТЕМА] запуск MySecurityMonitor
...
=== Ожидание инициализации компонентов ===
[ИНФО][OPTIC] Модуль управления оптикой активен
[ИНФО][ORBIT_LIM] Модуль ограничений орбиты запущен
[ИНФО][CENTRAL] Центральная система управления запущена
[ИНФО][AUTH] Модуль авторизации запущен
[ИНФО][ZONES] Хранилище зон ограничений запущено
[ИНФО][IMG_STOR] Хранилище изображений запущено
[ИНФО][ORBIT_CTRL] Система контроля орбиты запущена
[ИНФО][ORBIT_CTRL] Установлены новые ограничения орбиты: высота=300.0-1500.0км
[ИНФО][ZONES_MGR] Модуль работы с запрещенными зонами запущен
[ИНФО][ZONES_MGR] Получен список из 0 зон
[ИНФО][ZONES_MGR] Отправлено обновление зон в центральную систему: 0 зон
[ИНФО][CENTRAL] Получено обновление запрещенных зон: 0 зон
[ИНФО][OPTIC] Получено обновление зон от ЦСУ: 0 зон
[ИНФО][ORBIT_MON] Модуль мониторинга орбиты запущен

=== 1.1 Тест снимка от АДМИНА (должен пройти) ===
[ИНФО][AUTH] Разрешено: admin -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: 56.958, 62.573
[ИНФО][OPTIC] Снимок разрешен, отправка на отрисовку: 56.958, 62.573
[ИНФО][CENTRAL] Снимок разрешен, отправляем на сохранение: (56.958,62.573)
[ИНФО][IMG_STOR] Сохранено изображение с координатами (56.958,62.573), timestamp=1745122643.0981507
[ИНФО][CENTRAL] Изображение успешно сохранено: (56.958,62.573), время=1745122643.0981507

=== 1.2 Тест снимка от ДОВЕРЕННОГО пользователя (должен пройти) ===
[ИНФО][AUTH] Разрешено: client_trusted -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: 58.678, 108.421
[ИНФО][OPTIC] Снимок разрешен, отправка на отрисовку: 58.678, 108.421
[ИНФО][CENTRAL] Снимок разрешен, отправляем на сохранение: (58.678,108.421)
[ИНФО][IMG_STOR] Сохранено изображение с координатами (58.678,108.421), timestamp=1745122644.6146958
[ИНФО][CENTRAL] Изображение успешно сохранено: (58.678,108.421), время=1745122644.6146958

=== 1.3 Тест снимка от ОБЫЧНОГО пользователя (должен пройти) ===
[ИНФО][AUTH] Разрешено: client -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: 43.847, 146.319
[ИНФО][OPTIC] Снимок разрешен, отправка на отрисовку: 43.847, 146.319
[ИНФО][CENTRAL] Снимок разрешен, отправляем на сохранение: (43.847,146.319)
[ИНФО][IMG_STOR] Сохранено изображение с координатами (43.847,146.319), timestamp=1745122646.6824791
[ИНФО][CENTRAL] Изображение успешно сохранено: (43.847,146.319), время=1745122646.6824791

=== 1.4 Тест снимка от НЕАВТОРИЗОВАННОГО пользователя (должен быть отклонен) ===
[ОШИБКА][AUTH] Неавторизованный клиент: unauthorized_user

=== 2.1 Добавление зоны от ОБЫЧНОГО пользователя (должно быть отклонено) ===
[ОШИБКА][AUTH] Запрещено: client не имеет права на add_zone_request

=== 2.2 Добавление зоны от АДМИНА (должно пройти) ===
[ИНФО][AUTH] Разрешено: admin -> add_zone_request
[ИНФО][CENTRAL] Получен запрос на добавление запрещенной зоны
[ИНФО][ZONES_MGR] Запрос на добавление зоны: id=1, координаты=-10.000,-10.000 - 10.000,10.000
[ИНФО][ZONES] Добавлена зона id=1, lat1=-10.000, lon1=-10.000, lat2=10.000, lon2=10.000
[ИНФО][ZONES_MGR] Запрос на отрисовку зоны: id=1
[ИНФО][ZONES_MGR] Результат операции add для зоны 1: успешно
[ИНФО][ZONES_MGR] Получен список из 1 зон
[ИНФО][ZONES_MGR] Отправлено обновление зон в центральную систему: 1 зон
[ИНФО][CENTRAL] Получено обновление запрещенных зон: 1 зон
[ИНФО][OPTIC] Получено обновление зон от ЦСУ: 1 зон

=== 2.3 Добавление второй зоны от АДМИНА (должно пройти) ===
[ИНФО][AUTH] Разрешено: admin -> add_zone_request
[ИНФО][CENTRAL] Получен запрос на добавление запрещенной зоны
[ИНФО][ZONES_MGR] Запрос на добавление зоны: id=2, координаты=30.000,30.000 - 170.000,170.000
[ИНФО][ZONES] Добавлена зона id=2, lat1=30.000, lon1=30.000, lat2=170.000, lon2=170.000
[ИНФО][ZONES_MGR] Запрос на отрисовку зоны: id=2
[ИНФО][ZONES_MGR] Результат операции add для зоны 2: успешно
[ИНФО][ZONES_MGR] Получен список из 2 зон
[ИНФО][ZONES_MGR] Отправлено обновление зон в центральную систему: 2 зон
[ИНФО][CENTRAL] Получено обновление запрещенных зон: 2 зон
[ИНФО][OPTIC] Получено обновление зон от ЦСУ: 2 зон

=== Ожидание перемещения спутника... ===

=== 2.4 Тест снимка в запрещенной зоне (должен быть отклонен) ===
[ИНФО][AUTH] Разрешено: client -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: 58.188, 68.552
[ИНФО][OPTIC] Точка (58.188,68.552) в запрещенной зоне
[ОШИБКА][OPTIC] СНИМОК ЗАБЛОКИРОВАН - координаты в запрещенной зоне: 58.188, 68.552
[ОШИБКА][CENTRAL] Снимок заблокирован - находится в запрещенной зоне: (58.188,68.552)

=== 2.5 Удаление зоны от ДОВЕРЕННОГО пользователя (должно быть отклонено) ===
[ОШИБКА][AUTH] Запрещено: client_trusted не имеет права на remove_zone_request

=== 2.6 Удаление зоны от АДМИНА (должно пройти) ===
[ИНФО][AUTH] Разрешено: admin -> remove_zone_request
[ИНФО][CENTRAL] Получен запрос на удаление запрещенной зоны
[ИНФО][ZONES_MGR] Результат операции remove для зоны 1: успешно
[ИНФО][ZONES_MGR] Получен список из 1 зон
[ИНФО][ZONES_MGR] Отправлено обновление зон в центральную систему: 1 зон
[ИНФО][CENTRAL] Получено обновление запрещенных зон: 1 зон
[ИНФО][OPTIC] Получено обновление зон от ЦСУ: 1 зон

=== 3.1 Изменение орбиты от ОБЫЧНОГО пользователя (должно быть отклонено) ===
[ОШИБКА][AUTH] Запрещено: client не имеет права на change_orbit

=== 3.2 Изменение орбиты от СПЕЦ пользователя (должно пройти) ===
[ИНФО][AUTH] Разрешено: client_trusted -> change_orbit
[ИНФО][CENTRAL] Получен запрос на изменение орбиты
[ИНФО][CENTRAL] Запрос на изменение орбиты передан в модуль мониторинга орбиты
[ИНФО][ORBIT_MON] Запрос на проверку параметров орбиты: высота=850.0км, наклонение=0.785, RAAN=1.571
[ИНФО][ORBIT_MON] Параметры переданы в систему контроля орбиты. Текущая высота: 1000.0км
[ИНФО][ORBIT_CTRL] Проверка запроса на изменение орбиты: высота=850.0км, наклонение=0.785, RAAN=1000000.000
[ИНФО][ORBIT_CTRL] Запрос на изменение орбиты соответствует ограничениям, отправляем в ЦСУ
[ИНФО][CENTRAL] Получено одобрение изменения орбиты: высота=850.0км, наклонение=0.785, RAAN=1000000.000
[ИНФО][SAT] орбита изменена: alt=850000.0, RAAN=1000000.0, incl=0.7853981633974483

=== 3.3 Тест снимка на новой орбите (от спец пользователя) ===
[ИНФО][AUTH] Разрешено: client_trusted -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: -24.007, -174.040
[ИНФО][OPTIC] Снимок разрешен, отправка на отрисовку: -24.007, -174.040
[ИНФО][CENTRAL] Снимок разрешен, отправляем на сохранение: (-24.007,-174.040)
[ИНФО][IMG_STOR] Сохранено изображение с координатами (-24.007,-174.040), timestamp=1745122681.7051215
[ИНФО][CENTRAL] Изображение успешно сохранено: (-24.007,-174.040), время=1745122681.7051215

=== 3.4 Изменение орбиты на НЕДОПУСТИМЫЕ параметры от АДМИНА (должно быть отклонено системой контроля) ===     
[ИНФО][AUTH] Разрешено: admin -> change_orbit
[ИНФО][CENTRAL] Получен запрос на изменение орбиты
[ИНФО][CENTRAL] Запрос на изменение орбиты передан в модуль мониторинга орбиты
[ИНФО][ORBIT_MON] Запрос на проверку параметров орбиты: высота=100.0км, наклонение=0.524, RAAN=0.785
[ИНФО][ORBIT_MON] Параметры переданы в систему контроля орбиты. Текущая высота: 1000.0км
[ИНФО][ORBIT_CTRL] Проверка запроса на изменение орбиты: высота=100.0км, наклонение=0.524, RAAN=1000000.000
[ОШИБКА][ORBIT_CTRL] Запрос на изменение орбиты отклонен:
[ОШИБКА][ORBIT_CTRL] - Высота орбиты 100.0км меньше минимально допустимой 300.0км
[ОШИБКА][ORBIT_CTRL] - Изменение высоты 900.0км превышает допустимое 200.0км
[ОШИБКА][ORBIT_CTRL] - Изменение наклонения 0.524 превышает допустимое 0.500
[ОШИБКА][CENTRAL] Запрос на изменение орбиты отклонен из-за нарушений ограничений:
[ОШИБКА][CENTRAL] - Высота орбиты 100.0км меньше минимально допустимой 300.0км
[ОШИБКА][CENTRAL] - Изменение высоты 900.0км превышает допустимое 200.0км
[ОШИБКА][CENTRAL] - Изменение наклонения 0.524 превышает допустимое 0.500

=== 3.5 Финальный тест снимка (от админа, на текущей допустимой орбите) ===
[ИНФО][AUTH] Разрешено: admin -> request_photo
[ИНФО][CENTRAL] Получен запрос на фотографирование
[ИНФО][OPTIC] Получен снимок с координатами: -37.755, -71.241
[ИНФО][OPTIC] Снимок разрешен, отправка на отрисовку: -37.755, -71.241
[ИНФО][CENTRAL] Снимок разрешен, отправляем на сохранение: (-37.755,-71.241)
[ИНФО][IMG_STOR] Сохранено изображение с координатами (-37.755,-71.241), timestamp=1745122687.7063355
[ИНФО][CENTRAL] Изображение успешно сохранено: (-37.755,-71.241), время=1745122687.7063355

=== Демонстрация завершена ===

=== Завершение работы системы ===
[ИНФО][AUTH] Разрешено: admin -> get_all_images
[ИНФО][CENTRAL] Получен запрос на получение всех изображений
[ИНФО][IMG_STOR] Запрошен список всех изображений (5 шт.)
[ИНФО][IMG_STOR] Полученные изображения: [(np.float64(56.957524942787416), np.float64(62.57322190615911), 1745122643.0981507), (np.float64(58.678167093666644), np.float64(108.4210904107768), 1745122644.6146958), (np.float64(43.847306411227365), np.float64(146.31856761610425), 1745122646.6824791), (np.float64(-24.006860796313884), np.float64(-174.03976493386898), 1745122681.7051215), (np.float64(-37.75539379458469), np.float64(-71.24060096168316), 1745122687.7063355)]
[ИНФО][СИСТЕМА] остановка MySecurityMonitor
[ИНФО][СИСТЕМА] остановка Satellite
[ИНФО][СИСТЕМА] остановка Camera
[ИНФО][СИСТЕМА] остановка OrbitDrawer
[ИНФО][СИСТЕМА] остановка RestrictedZonesStorage
[ИНФО][СИСТЕМА] остановка RestrictedZonesManager
[ИНФО][СИСТЕМА] остановка OpticsControl
[ИНФО][СИСТЕМА] остановка ImageStorage
[ИНФО][СИСТЕМА] остановка OrbitControl
[ИНФО][СИСТЕМА] остановка OrbitLimiter
[ИНФО][СИСТЕМА] остановка OrbitMonitoring
[ИНФО][СИСТЕМА] остановка AuthorizationModule
[ИНФО][СИСТЕМА] остановка CentralControlSystem
[ИНФО][СИСТЕМА] удаление MySecurityMonitor
[ИНФО][СИСТЕМА] удаление Satellite
[ИНФО][СИСТЕМА] удаление Camera
[ИНФО][СИСТЕМА] удаление OrbitDrawer
[ИНФО][СИСТЕМА] удаление RestrictedZonesStorage
[ИНФО][СИСТЕМА] удаление RestrictedZonesManager
[ИНФО][СИСТЕМА] удаление OpticsControl
[ИНФО][СИСТЕМА] удаление ImageStorage
[ИНФО][СИСТЕМА] удаление OrbitControl
[ИНФО][СИСТЕМА] удаление OrbitLimiter
[ИНФО][СИСТЕМА] удаление OrbitMonitoring
[ИНФО][СИСТЕМА] удаление AuthorizationModule
[ИНФО][СИСТЕМА] удаление CentralControlSystem
Система остановлена
```
